{"ast":null,"code":"import _regeneratorRuntime from\"/Users/phamthuan/Downloads/getis/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/phamthuan/Downloads/getis/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/phamthuan/Downloads/getis/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import axios from'axios';import'bootstrap/dist/css/bootstrap.min.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FileStatistics=function FileStatistics(_ref){var fileId=_ref.fileId;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),statistics=_useState2[0],setStatistics=_useState2[1];useEffect(function(){var fetchStatistics=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/public-api/file/\".concat(fileId,\"/statistics\"),{headers:{'Authorization':'xxftwft1uud79b0pm7g4ohl0'}});case 3:response=_context.sent;setStatistics(response.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error('Error fetching file statistics:',_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function fetchStatistics(){return _ref2.apply(this,arguments);};}();fetchStatistics();},[fileId]);var formatTime=function formatTime(timeInSeconds){var hours=Math.floor(timeInSeconds/3600).toString().padStart(2,'0');var minutes=Math.floor(timeInSeconds%3600/60).toString().padStart(2,'0');var seconds=(timeInSeconds%60).toString().padStart(2,'0');return\"\".concat(hours,\":\").concat(minutes,\":\").concat(seconds,\"s\");};if(!statistics){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading statistics...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",style:{clear:'both'},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-4\",children:\"D\\u1EEF li\\u1EC7u chi ti\\u1EBFt\"}),/*#__PURE__*/_jsx(\"table\",{className:\"table\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0110i\\u1EC3m t\\u01B0\\u01A1ng t\\xE1c:\"}),/*#__PURE__*/_jsx(\"td\",{children:statistics.engagement_score})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"T\\u1ED5ng s\\u1ED1 l\\u01B0\\u1EE3t xem:\"}),/*#__PURE__*/_jsx(\"td\",{children:statistics.total_views})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Th\\u1EDDi gian trung b\\xECnh (gi\\xE2y):\"}),/*#__PURE__*/_jsx(\"td\",{children:formatTime(statistics.avg_time_seconds)})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Th\\u1EDDi gian trung b\\xECnh tr\\xEAn m\\u1ED7i trang (gi\\xE2y):\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Trang B\\xE1o Gi\\xE1\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Th\\u1EDDi gian\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:statistics.avg_time_per_page_seconds.map(function(time,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:formatTime(time)})]},index);})})]})})]})]})}),/*#__PURE__*/_jsx(\"h3\",{children:\"Recordings\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table container\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Th\\u1EDDi gian\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0110\\u1ECBa ch\\u1EC9 IP\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Qu\\u1ED1c gia\"}),/*#__PURE__*/_jsx(\"th\",{children:\"URL gi\\u1EDBi thi\\u1EC7u\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Th\\u1EDDi gian \\u0111\\u1ECDc (gi\\xE2y)\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{style:{wordWrap:'break-word'},children:statistics.recordings.map(function(recording,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:recording.time}),/*#__PURE__*/_jsx(\"td\",{children:recording.ip}),/*#__PURE__*/_jsx(\"td\",{children:recording.country}),/*#__PURE__*/_jsx(\"td\",{style:{wordBreak:'break-all',whiteSpace:'pre-wrap'},children:recording.referrer_url}),/*#__PURE__*/_jsx(\"td\",{children:formatTime(recording.read_time_sec)})]},index);})})]})]});};export default FileStatistics;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","FileStatistics","_ref","fileId","_useState","_useState2","_slicedToArray","statistics","setStatistics","fetchStatistics","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","concat","headers","sent","data","t0","console","error","stop","apply","arguments","formatTime","timeInSeconds","hours","Math","floor","toString","padStart","minutes","seconds","children","className","style","clear","engagement_score","total_views","avg_time_seconds","avg_time_per_page_seconds","map","time","index","wordWrap","recordings","recording","ip","country","wordBreak","whiteSpace","referrer_url","read_time_sec"],"sources":["/Users/phamthuan/Downloads/getis/src/FileStatistics.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nconst FileStatistics = ({ fileId }) => {\n  const [statistics, setStatistics] = useState(null);\n\n  useEffect(() => {\n    const fetchStatistics = async () => {\n      try {\n        const response = await axios.get(`/public-api/file/${fileId}/statistics`, {\n          headers: { 'Authorization': 'xxftwft1uud79b0pm7g4ohl0' }\n        });\n        setStatistics(response.data);\n      } catch (error) {\n        console.error('Error fetching file statistics:', error);\n      }\n    };\n\n    fetchStatistics();\n  }, [fileId]);\n\n  const formatTime = (timeInSeconds) => {\n    const hours = Math.floor(timeInSeconds / 3600).toString().padStart(2, '0');\n    const minutes = Math.floor((timeInSeconds % 3600) / 60).toString().padStart(2, '0');\n    const seconds = (timeInSeconds % 60).toString().padStart(2, '0');\n    return `${hours}:${minutes}:${seconds}s`;\n  };\n\n  if (!statistics) {\n    return <div>Loading statistics...</div>;\n  }\n\n  return (\n    <div className=\"container\" style={{ clear: 'both' }}>\n      <h2 className=\"mt-4\">Dữ liệu chi tiết</h2>\n      <table className=\"table\">\n        <tbody>\n          <tr>\n            <td>Điểm tương tác:</td>\n            <td>{statistics.engagement_score}</td>\n          </tr>\n          <tr>\n            <td>Tổng số lượt xem:</td>\n            <td>{statistics.total_views}</td>\n          </tr>\n          <tr>\n            <td>Thời gian trung bình (giây):</td>\n            <td>{formatTime(statistics.avg_time_seconds)}</td>\n          </tr>\n          <tr>\n            <td>Thời gian trung bình trên mỗi trang (giây):</td>\n            <td>\n              <table className=\"table\">\n                <thead>\n                  <tr>\n                    <th>Trang Báo Giá</th>\n                    <th>Thời gian</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {statistics.avg_time_per_page_seconds.map((time, index) => (\n                    <tr key={index}>\n                      <td>{index + 1}</td>\n                      <td>{formatTime(time)}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n\n      <h3>Recordings</h3>\n      <table className=\"table container\">\n        <thead>\n          <tr>\n            <th>Thời gian</th>\n            <th>Địa chỉ IP</th>\n            <th>Quốc gia</th>\n            <th>URL giới thiệu</th>\n            <th>Thời gian đọc (giây)</th>\n          </tr>\n        </thead>\n        <tbody style={{ wordWrap: 'break-word' }}>\n          {statistics.recordings.map((recording, index) => (\n            <tr key={index}>\n              <td>{recording.time}</td>\n              <td>{recording.ip}</td>\n              <td>{recording.country}</td>\n              <td style={{ wordBreak: 'break-all', whiteSpace: 'pre-wrap' }}>\n                {recording.referrer_url}\n              </td>\n              <td>{formatTime(recording.read_time_sec)}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default FileStatistics;\n"],"mappings":"kXAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,sCAAsC,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE9C,GAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAAC,IAAA,CAAmB,IAAb,CAAAC,MAAM,CAAAD,IAAA,CAANC,MAAM,CAC9B,IAAAC,SAAA,CAAoCT,QAAQ,CAAC,IAAI,CAAC,CAAAU,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA3CG,UAAU,CAAAF,UAAA,IAAEG,aAAa,CAAAH,UAAA,IAEhCX,SAAS,CAAC,UAAM,CACd,GAAM,CAAAe,eAAe,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEG,CAAAxB,KAAK,CAACyB,GAAG,qBAAAC,MAAA,CAAqBnB,MAAM,gBAAe,CACxEoB,OAAO,CAAE,CAAE,eAAe,CAAE,0BAA2B,CACzD,CAAC,CAAC,QAFIR,QAAQ,CAAAG,QAAA,CAAAM,IAAA,CAGdhB,aAAa,CAACO,QAAQ,CAACU,IAAI,CAAC,CAACP,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAQ,EAAA,CAAAR,QAAA,aAE7BS,OAAO,CAACC,KAAK,CAAC,iCAAiC,CAAAV,QAAA,CAAAQ,EAAO,CAAC,CAAC,yBAAAR,QAAA,CAAAW,IAAA,MAAAf,OAAA,gBAE3D,kBATK,CAAAL,eAAeA,CAAA,SAAAC,KAAA,CAAAoB,KAAA,MAAAC,SAAA,OASpB,CAEDtB,eAAe,CAAC,CAAC,CACnB,CAAC,CAAE,CAACN,MAAM,CAAC,CAAC,CAEZ,GAAM,CAAA6B,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAIC,aAAa,CAAK,CACpC,GAAM,CAAAC,KAAK,CAAGC,IAAI,CAACC,KAAK,CAACH,aAAa,CAAG,IAAI,CAAC,CAACI,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CAC1E,GAAM,CAAAC,OAAO,CAAGJ,IAAI,CAACC,KAAK,CAAEH,aAAa,CAAG,IAAI,CAAI,EAAE,CAAC,CAACI,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CACnF,GAAM,CAAAE,OAAO,CAAG,CAACP,aAAa,CAAG,EAAE,EAAEI,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CAChE,SAAAhB,MAAA,CAAUY,KAAK,MAAAZ,MAAA,CAAIiB,OAAO,MAAAjB,MAAA,CAAIkB,OAAO,MACvC,CAAC,CAED,GAAI,CAACjC,UAAU,CAAE,CACf,mBAAOT,IAAA,QAAA2C,QAAA,CAAK,uBAAqB,CAAK,CAAC,CACzC,CAEA,mBACEzC,KAAA,QAAK0C,SAAS,CAAC,WAAW,CAACC,KAAK,CAAE,CAAEC,KAAK,CAAE,MAAO,CAAE,CAAAH,QAAA,eAClD3C,IAAA,OAAI4C,SAAS,CAAC,MAAM,CAAAD,QAAA,CAAC,iCAAgB,CAAI,CAAC,cAC1C3C,IAAA,UAAO4C,SAAS,CAAC,OAAO,CAAAD,QAAA,cACtBzC,KAAA,UAAAyC,QAAA,eACEzC,KAAA,OAAAyC,QAAA,eACE3C,IAAA,OAAA2C,QAAA,CAAI,wCAAe,CAAI,CAAC,cACxB3C,IAAA,OAAA2C,QAAA,CAAKlC,UAAU,CAACsC,gBAAgB,CAAK,CAAC,EACpC,CAAC,cACL7C,KAAA,OAAAyC,QAAA,eACE3C,IAAA,OAAA2C,QAAA,CAAI,uCAAiB,CAAI,CAAC,cAC1B3C,IAAA,OAAA2C,QAAA,CAAKlC,UAAU,CAACuC,WAAW,CAAK,CAAC,EAC/B,CAAC,cACL9C,KAAA,OAAAyC,QAAA,eACE3C,IAAA,OAAA2C,QAAA,CAAI,yCAA4B,CAAI,CAAC,cACrC3C,IAAA,OAAA2C,QAAA,CAAKT,UAAU,CAACzB,UAAU,CAACwC,gBAAgB,CAAC,CAAK,CAAC,EAChD,CAAC,cACL/C,KAAA,OAAAyC,QAAA,eACE3C,IAAA,OAAA2C,QAAA,CAAI,gEAA2C,CAAI,CAAC,cACpD3C,IAAA,OAAA2C,QAAA,cACEzC,KAAA,UAAO0C,SAAS,CAAC,OAAO,CAAAD,QAAA,eACtB3C,IAAA,UAAA2C,QAAA,cACEzC,KAAA,OAAAyC,QAAA,eACE3C,IAAA,OAAA2C,QAAA,CAAI,qBAAa,CAAI,CAAC,cACtB3C,IAAA,OAAA2C,QAAA,CAAI,gBAAS,CAAI,CAAC,EAChB,CAAC,CACA,CAAC,cACR3C,IAAA,UAAA2C,QAAA,CACGlC,UAAU,CAACyC,yBAAyB,CAACC,GAAG,CAAC,SAACC,IAAI,CAAEC,KAAK,qBACpDnD,KAAA,OAAAyC,QAAA,eACE3C,IAAA,OAAA2C,QAAA,CAAKU,KAAK,CAAG,CAAC,CAAK,CAAC,cACpBrD,IAAA,OAAA2C,QAAA,CAAKT,UAAU,CAACkB,IAAI,CAAC,CAAK,CAAC,GAFpBC,KAGL,CAAC,EACN,CAAC,CACG,CAAC,EACH,CAAC,CACN,CAAC,EACH,CAAC,EACA,CAAC,CACH,CAAC,cAERrD,IAAA,OAAA2C,QAAA,CAAI,YAAU,CAAI,CAAC,cACnBzC,KAAA,UAAO0C,SAAS,CAAC,iBAAiB,CAAAD,QAAA,eAChC3C,IAAA,UAAA2C,QAAA,cACEzC,KAAA,OAAAyC,QAAA,eACE3C,IAAA,OAAA2C,QAAA,CAAI,gBAAS,CAAI,CAAC,cAClB3C,IAAA,OAAA2C,QAAA,CAAI,2BAAU,CAAI,CAAC,cACnB3C,IAAA,OAAA2C,QAAA,CAAI,eAAQ,CAAI,CAAC,cACjB3C,IAAA,OAAA2C,QAAA,CAAI,0BAAc,CAAI,CAAC,cACvB3C,IAAA,OAAA2C,QAAA,CAAI,wCAAoB,CAAI,CAAC,EAC3B,CAAC,CACA,CAAC,cACR3C,IAAA,UAAO6C,KAAK,CAAE,CAAES,QAAQ,CAAE,YAAa,CAAE,CAAAX,QAAA,CACtClC,UAAU,CAAC8C,UAAU,CAACJ,GAAG,CAAC,SAACK,SAAS,CAAEH,KAAK,qBAC1CnD,KAAA,OAAAyC,QAAA,eACE3C,IAAA,OAAA2C,QAAA,CAAKa,SAAS,CAACJ,IAAI,CAAK,CAAC,cACzBpD,IAAA,OAAA2C,QAAA,CAAKa,SAAS,CAACC,EAAE,CAAK,CAAC,cACvBzD,IAAA,OAAA2C,QAAA,CAAKa,SAAS,CAACE,OAAO,CAAK,CAAC,cAC5B1D,IAAA,OAAI6C,KAAK,CAAE,CAAEc,SAAS,CAAE,WAAW,CAAEC,UAAU,CAAE,UAAW,CAAE,CAAAjB,QAAA,CAC3Da,SAAS,CAACK,YAAY,CACrB,CAAC,cACL7D,IAAA,OAAA2C,QAAA,CAAKT,UAAU,CAACsB,SAAS,CAACM,aAAa,CAAC,CAAK,CAAC,GAPvCT,KAQL,CAAC,EACN,CAAC,CACG,CAAC,EACH,CAAC,EACL,CAAC,CAEV,CAAC,CAED,cAAe,CAAAlD,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}